var m=Object.defineProperty;var p=(s,e,r)=>e in s?m(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var l=(s,e,r)=>(p(s,typeof e!="symbol"?e+"":e,r),r);import{P as h}from"./vendor.3fc30302.js";const u=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}};u();function a(s){return s*globalThis.pixelRatio}class f extends h.Scene{constructor(){super("main-scene");l(this,"groundLayer");l(this,"bredde");l(this,"hoyde");l(this,"map");l(this,"helt");l(this,"presentsGroup");l(this,"hasJumpedTwice",!1);l(this,"timeSinceLastJump")}init(){this.bredde=this.game.scale.gameSize.width,this.hoyde=this.game.scale.gameSize.height}create(){this.map=this.make.tilemap({key:"map"});const e=this.map.addTilesetImage(`tiles-sprite@${a(1)}`,"tiles"),r=this.map.addTilesetImage(`presents-sprite@${a(1)}`,"presents"),o=this.map.createLayer("Level01",[e,r]);o.setCollisionByProperty({collision:!0}),this.presentsGroup=this.physics.add.group({allowGravity:!1,immovable:!0}),this.helt=this.physics.add.sprite(a(32/2),this.hoyde-a(40/2+32+100),"helt"),this.helt.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("helt",{frames:[1,0]}),frameRate:6,repeat:-1}),this.helt.anims.create({key:"stand",frames:this.anims.generateFrameNumbers("helt",{frames:[1]})}),this.helt.anims.create({key:"jump",frames:this.anims.generateFrameNumbers("helt",{frames:[0]})}),this.helt.setBounce(.1),this.input.on("pointerdown",()=>{console.log("hopp")}),this.cameras.main.startFollow(this.helt),this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.physics.add.collider(this.helt,o)}update(e){this.input.activePointer.isDown&&(this.helt.body.blocked.down||this.helt.body.touching.down||this.hasJumpedTwice)?(this.helt.setVelocityY(a(-200)),(!this.timeSinceLastJump||e-this.timeSinceLastJump>300)&&(this.hasJumpedTwice?this.hasJumpedTwice=!1:(this.hasJumpedTwice=!0,this.timeSinceLastJump=e))):this.helt.setVelocityX(a(100)),this.helt.body.onFloor()&&!this.helt.body.onWall()?this.helt.play("walk",!0):this.helt.body.onFloor()?this.helt.play("stand",!0):this.helt.play("jump",!0),this.helt.x>this.map.widthInPixels&&this.scene.restart()}}class g extends h.Scene{constructor(){super({key:"preload-scene"})}preload(){console.log("preload-scene"),this.load.spritesheet("helt",`/assets/helt-sprite@${a(1)}.png`,{frameWidth:a(32),frameHeight:a(40),margin:1,spacing:2}),this.load.image("tiles",`/assets/tiles-sprite@${a(1)}.png`),this.load.image("presents",`/assets/presents-sprite@${a(1)}.png`),this.load.tilemapTiledJSON("map",`assets/level01@${a(1)}.json`)}create(){this.scene.start("main-scene")}}function y(s,e,r,o,t){return{type:Phaser.AUTO,scene:[g,f],width:s*o,height:e*o,backgroundColor:8900331,autoFocus:!0,render:{},physics:{default:"arcade",arcade:{gravity:{y:300*o},debug:t}},scale:{mode:r,autoCenter:Phaser.Scale.Center.CENTER_BOTH,zoom:1/o}}}let d=!0;d=!1;let n=window.devicePixelRatio;n!==1&&n!==2&&n!==3&&(n=1);globalThis.pixelRatio=n;const w=y(400,640,h.Scale.ScaleModes.NONE,n,d);new h.Game(w);window.onload=()=>{const s=document.querySelector("#loader");s.style.display="none"};
